ComplexDiagram(
	Comment("TABSTOP:"),
	"$",
	Choice(
		0,
		OneOrMore(
			Sequence(
				Comment("Numeral Representing Tabstop"),
				"0-9"
			),
			Comment("0 is final position after snippet is done")
		),
		Sequence(
			NonTerminal("VARIABLE"),
			Comment("See the 'VARIABLE' Group for details to formulate Variable")
		),
		Sequence(
			"{",
			Choice(
				0,
				Sequence(
					OneOrMore(
						Sequence(
							Comment("Numeral Representing Tabstop"),
							"0-9"
						)
					),
					Choice(
						0,
						Group(
							Sequence(
								"|",
								OneOrMore(
									NonTerminal("Choice"),
									","
								),
								"|"
							),
							"Options"
						),
						Sequence(
							Group(
								Sequence(
									":",
									// Comment("Default Text"),
									OneOrMore(
										Choice(
											0,
											"Text",
											"TABSTOP"
										)
									)
								),
								"Placeholder"
							),
							Optional(
								Sequence(
									"TRANSFORM",
									Comment("See 'TRANSFORM' Group; affects inserted text after tab key pressed.")
								)
							)
						)
					)
				),
				Sequence(
					Group(
						Choice(
							0,
							"TM_SELECTED_TEXT",
							HorizontalChoice(
								"TM_CURRENT_LINE",
								"TM_CURRENT_WORD"
							),
							HorizontalChoice(
								"TM_LINE_INDEX",
								"TM_LINE_NUMBER"
							),
							HorizontalChoice(
								"TM_FILENAME",
								"TM_FILENAME_BASE"
							),
							HorizontalChoice(
								"TM_DIRECTORY",
								"TM_FILEPATH"
							),
							"RELATIVE_FILEPATH",
							"CLIPBOARD",
							HorizontalChoice(
								"WORKSPACE_NAME",
								"WORKSPACE_FOLDER"
							),
							HorizontalChoice(
								"CURSOR_INDEX",
								"CURSOR_NUMBER"
							),
							HorizontalChoice(
								"CURRENT_YEAR",
								"CURRENT_YEAR_SHORT"
							),
							"CURRENT_MONTH",
							HorizontalChoice(
								"CURRENT_MONTH_NAME",
								"CURRENT_MONTH_NAME_SHORT"
							),
							"CURRENT_DATE",
							HorizontalChoice(
								"CURRENT_DAY_NAME",
								"CURRENT_DAY_NAME_SHORT"
							),
							HorizontalChoice(
								"CURRENT_HOUR",
								"CURRENT_MINUTE"
							),
							HorizontalChoice(
								"CURRENT_SECOND",
								"CURRENT_SECONDS_UNIX"
							),
							HorizontalChoice(
								"RANDOM",
								"RANDOM_HEX"
							),
							"UUID",
							HorizontalChoice(
								"BLOCK_COMMENT_START",
								"BLOCK_COMMENT_END"
							),
							"LINE_COMMENT"
						),
						"VARIABLE"
					),
					Optional(
						Choice(
							0,
							Sequence(
								":",
								"default value"
							),
							Group(
								Sequence(
									"/",
									NonTerminal("Regex"),
									"/",
									NonTerminal("Format String"),
									"/",
									Optional(
										Choice(
											0,
											"g",
											"i",
											"m"
										)
									)
								),
								"Transform"
							)
						)
					)
				)
			),
			"}"
		)
	)
);